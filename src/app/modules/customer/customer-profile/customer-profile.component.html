
<!--Profile View-->
<div class="container-fluid" *ngIf="!editmode && customer">
    <section class="px-md-5 mx-md-5 dark-grey-text">
  

        <div class="row cust-row pd-top-min" *ngIf="isowner">
                <div class="col-md-9">
                </div>
                <div class="col-md-3">
                  <a type="button" mdbBtn color="green" class="waves-light btn btn-md" style="border-radius: 30px;"
                  (click)="editmode = !editmode" mdbWavesEffect>Edit Your Profile
                  </a>
                </div>
        </div>
  
  
      <!--profile header-->
      <div class="container-fluid header-cls">
        <div class="row f-image">
        </div>
        <div class="row logo-cls">
          <div class="col-md-3">
              <img src="{{customer ? customer.profile_pic : imageUrl}}"
              alt="User Pic" class="img-thumbnail logo-img" style="width:100%;">
          </div>
          <div class="col-md-9">
            <h2 class="txt-title"> {{customer ? customer.first_name : 'Loading...'}}  {{customer ? customer.last_name : ' Loading...'}} </h2>
          </div>
        </div>
  
        <!-- profile content-->
        <div class="page-content">
          <div class="content-title" >
            Your Details
          </div>
            <hr>
  
           
                <!--row 1-->
              <div class="row div-content">
                <div class="col-md-5 inst-text">
                  <mdb-icon fas icon="envelope"></mdb-icon> <span> Your Email </span>
                </div>
  
                <div class="col-md-7 profile-text">
                    <span> {{customer ? customer.email : 'Loading...'}}</span>
                </div>
              </div>
  
                 <!--row 2-->
                 <div class="row div-content">
                  <div class="col-md-5 inst-text">
                    <mdb-icon fas icon="phone"></mdb-icon> <span> Your Mobile No </span>
                  </div>
  
                  <div class="col-md-7 profile-text">
                      <span> {{customer ? customer.contact_no : 'Loading...'}}</span>
                  </div>
                </div>
  
                  <!--row 2-->
                  <div class="row div-content">
                    <div class="col-md-5 inst-text">
                      <mdb-icon fas icon="mercury"></mdb-icon> <span> Gender</span>
                    </div>
  
                    <div class="col-md-7 profile-text">
                        <span> {{customer.gender ? customer.gender : 'Loading...'}}</span>
                    </div>
                  </div>
  
                
                      <!--row 2-->
                      <div class="row div-content">
                        <div class="col-md-5 inst-text">
                          <mdb-icon fas icon="home"></mdb-icon> <span> Your Address </span>
                        </div>
  
                        <div class="col-md-7 profile-text">
                            <span> {{customer ? customer.address_line1 : 'Loading...'}}</span>
                            <br>
                            <span> {{customer ? customer.address_line2: ' Loading...'}}</span>

                        </div>
                      </div>
                      <br>
                <div class="content-title div-content" >
                  Account Details
                </div>
                  <hr>
            
                  <!--row 4-->
                  <div class="row div-content">
                    <div class="col-md-5 inst-text">
                      <mdb-icon fas icon="key"></mdb-icon> <span> Password </span>
                    </div>
  
                    <div class="col-md-7 profile-text">
                        <span> ******* </span>
                    </div>
                  </div>

                  <div class="row div-content">
                      <div class="col-md-5"></div>
                      <div class="col-md-7">
                        <a type="button" mdbBtn color="green"
                        class="waves-light btn btn-md" mdbWavesEffect outline="yes" style="margin:0 auto; border-radius: 30px;"
                        (click)="changePasswordModal.show()">
                          Change Password
                    </a>
                      </div> 
                  </div>
                  <hr>
                    <!--row 3-->
                 <div class="row div-content">
                  <div class="col-md-5 inst-text">
                    <mdb-icon fas icon="calendar-check"></mdb-icon> <span> Registered Date </span>
                  </div>
  
                  <div class="col-md-7 profile-text">
                      <span> {{customer ? customer.reg_date.slice(0,10) : 'Loading...'}}</span>
                  </div>
                </div>
                  <hr>
          </div>
       </div>
   </section>
  </div>
  
  
  <!--edit profile-->
  <div class="container-fluid" *ngIf="editmode && customer">
  
    <form class="service-form pd-top-min" #editProfile="ngForm" (submit)= "editUser(editProfile)">
  
    <section class="px-md-5 mx-md-5 dark-grey-text">
        <!--edit content-->
        <div class="pd-top-min text-center">

          <div class="row">
  
            <div class="col-md-3 inst-text" >
              <mdb-icon fas icon="award"></mdb-icon> <span> Profile Picture </span>
            </div>
  
            <div class="col-md-3 text-center">
              <a role="button" mdbWavesEffect (click)="img.click()">
                <img [src]="image ? imageUrl : customer.profile_pic"
                alt="Profile Picture" class="img-thumbnail logo-img-edit">
              </a>
              <input type="file" hidden="true" id="img" #img
              ngmodel name="image" accept="image/*" (change) = "onImageUploaded($event)">
              <p><b> Upload from your Device </b></p>
            </div>
  
          </div>
  
  
          <div class="row page-content">
            <div class="col-md-3 inst-text">
              <mdb-icon fas icon="file-signature"></mdb-icon> <span> Name </span>
            </div>
  
          <div class="col-md-7 text-center">
            <div class="row">
              <div class="col-md-6">
                <mat-form-field class="service-full-width">
                  <mat-label>First Name </mat-label>
                  <input matInput [ngModel]="customer.first_name" required
                  name="first_name" #firstName="ngModel">
                  <mat-error *ngIf="firstName.invalid">Please enter name</mat-error>
                </mat-form-field>
              </div>
              <div class="col-md-6">
                <mat-form-field class="service-full-width">
                  <mat-label>Last Name </mat-label>
                  <input matInput   [ngModel]="customer.last_name" required
                  #lastName="ngModel" name="last_name">
                  <mat-error *ngIf="lastName.invalid">Please enter name</mat-error>
                </mat-form-field>
              </div>
            </div>
           </div>
         </div>
  
  
  
           
           <!--row 2-->
           <div class="row page-content">
  
            <div class="col-md-3 inst-text">
              <mdb-icon fas icon="envelope"></mdb-icon> <span> Email Address</span>
                  </div>
  
            <div class="col-md-7 text-center">
              <mat-form-field class="service-full-width">
                <mat-label>Email Address here </mat-label>
                <input matInput [ngModel]="customer.email" required type="email"
                #email="ngModel" name="email" ngModel >
                <mat-error *ngIf="email.invalid">Please enter a valid email </mat-error>
              </mat-form-field>
            </div>
           </div>
  
              <!--row 2-->
              <div class="row page-content">
  
                <div class="col-md-3 inst-text">
                  <mdb-icon fas icon="phone"></mdb-icon> <span> Phone No</span>
                </div>
  
                <div class="col-md-7 text-center">
                  <mat-form-field class="service-full-width">
                    <mat-label> Contact No here </mat-label>
                    <input matInput [ngModel]="customer.contact_no" required
                    #contactNo="ngModel" minlength="10" maxlength="10" name="contact_no">
                    <mat-error *ngIf="contactNo.invalid">Phone No should contain 10 digits</mat-error>
                  </mat-form-field>
                </div>
               </div>
  
  
               <!--row 3-->
               <div class="row  page-content">
  
                <div class="col-md-3 inst-text">
                  <mdb-icon fas icon="mercury"></mdb-icon> <span> Gender</span>
                </div>
  
                <div class="col-md-7 text-center">
                  <mat-form-field class="service-full-width">
                    <mat-label>Select Gender</mat-label>
                    <mat-select [ngModel]="customer.gender" required
                       ngModel name="gender">
                      <mat-option value="male">Male</mat-option>
                      <mat-option value="female">Female</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
               </div>
  
           
                 <!--row 6-->
              <div class="row  page-content">
  
                <div class="col-md-3 inst-text">
                  <mdb-icon fas icon="home"></mdb-icon> <span> Address</span>
                </div>
  
                <div class="col-md-7 text-center">
                  <mat-form-field class="service-full-width">
                    <mat-label>Address Line 1 </mat-label>
                    <input matInput [ngModel]="customer.address_line1" required
                    name="address_line1" #addressLine1="ngModel" ngModel>
                    <mat-error *ngIf="addressLine1.invalid">Address must be provided</mat-error>
                  </mat-form-field>
                  <mat-form-field class="service-full-width">
                    <mat-label>Address Line 2 </mat-label>
                    <input matInput [ngModel]="customer.address_line2" name="address_line2" ngModel>
                  </mat-form-field >
                  <div class ="loc-btn pd-top-min">
                      <buttin class="btn btn-md" mdbBtn color="green" outline="yes" style="border-radius:30px;">
                        Set My Home Location
                    </buttin>
                  </div>
                </div>
               </div>
             <hr>
           
  
      </div>
    </section>
  
    <!--save buttons-->
    <div class="text-center" style="padding-bottom:30px;">
      <button type="button" mdbBtn color="green"
      class="waves-light btn btn-md  cust-btn btn-tab" mdbWavesEffect style="border-radius:30px;"
      type="submit">Save Changes</button>
      <button type="button" mdbBtn color="green"
      class="waves-light btn btn-md  cust-btn btn-tab" mdbWavesEffect outline="yes"  style="border-radius:30px;"
      (click)="editmode = !editmode" (click) ="editProfile.resetForm()">Discard</button>
      </div>
  </form>
  </div>
  
  
  
  
  <!--change password Modal-->
  <div
    mdbModal
    #changePasswordModal="mdbModal"
    class="modal fade"
    tabindex="-1"
    role="dialog"
    aria-labelledby="myBasicModalLabel"
    [config]="{ backdrop: false, ignoreBackdropClick: true }"
    aria-hidden="true"
  >
  <form #pwordForm="ngForm" (submit)="changePassword(pwordForm)">
  
    <div
      class="modal-dialog modal-dialog-centered"
      role="document"
      style="overflow-y: initial !important"
    >
      <div class="modal-content">
        <div class="modal-header">
          <button
            type="button"
            class="close pull-right"
            aria-label="Close"
            (click)="changePasswordModal.hide()"
          >
            <span aria-hidden="true">Ã—</span>
          </button>
          <h4 class="modal-title w-100" id="myModalLabel" >
            Change Password
          </h4>
        </div>
        <div class="modal-body text-center" style="height: 320px; overflow-y: auto;" >
  
           <!--row 2-->
           <div class="row page-content">
  
            <div class="col-md-5 inst-text">
               <span> Current Password </span>
            </div>
  
            <div class="col-md-7 text-center">
              <mat-form-field class="service-full-width">
                <mat-label> Your current password </mat-label>
                <input type="password" matInput required
                name="current_password" #currentPword= "ngModel" ngModel>
                <mat-error *ngIf="currentPword.invalid">Current Password is required</mat-error>
              </mat-form-field>
            </div>
           </div>
           <hr>
  
           <!--row 2-->
           <div class="row page-content">
  
            <div class="col-md-5 inst-text">
              <span> New Password </span>
            </div>
  
            <div class="col-md-7 text-center">
              <mat-form-field class="service-full-width">
                <mat-label> Your new password </mat-label>
                <input type="password" matInput required
                name="new_password1"  #newPassword1="ngModel" ngModel>
                <mat-error *ngIf="newPassword1.invalid">New Password cannot be empty</mat-error>
              </mat-form-field>
            </div>
           </div>
  
           <!--row 2-->
           <div class="row">
  
            <div class="col-md-5 inst-text">
              <span> Retype Password </span>
            </div>
  
            <div class="col-md-7 text-center">
              <mat-form-field class="service-full-width">
                <mat-label>Retypeyour password </mat-label>
                <input type="password" matInput required
                name="new_password2" #newPassword2="ngModel" ngModel
                >
                <mat-error *ngIf="newPassword2.invalid">Plase re-type the password</mat-error>
              </mat-form-field>
            </div>
           </div>
  
        </div>
  
        <div class="modal-footer">
          <button
            mdbBtn class="btn btn-md"
            color="green"
            type="submit"
            mdbWavesEffect
            style="border-radius:30px;"
          >
            Change Password
          </button>
          <button
            mdbBtn class="btn btn-md"
            color="green"
            outline="yes"
            (click)="changePasswordModal.hide()"
            mdbWavesEffect
            style="border-radius:30px;"
          >
            Close
          </button>
        </div>
      </div>
    </div>
  </form>
  </div>
  
  